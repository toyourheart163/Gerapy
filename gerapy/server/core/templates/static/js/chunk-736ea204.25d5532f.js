(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-736ea204"],{"44cd":function(t,e,n){"use strict";var a=n("dda6"),s=n.n(a);s.a},"7b3c":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"panel",attrs:{id:"project-index"}},[n("el-dialog",{staticClass:"dialog",attrs:{visible:t.createProjectDialog,size:"tiny",width:"auto"},on:{"update:visible":function(e){t.createProjectDialog=e}}},[n("el-tabs",{model:{value:t.activeDialogTab,callback:function(e){t.activeDialogTab=e},expression:"activeDialogTab"}},[n("el-tab-pane",{attrs:{label:t.$lang.columns.create,name:"create"}},[n("el-form",[n("el-form-item",{attrs:{label:t.$lang.columns.name,"label-width":"65px"}},[n("el-input",{staticClass:"inline",attrs:{placeholder:t.$lang.columns.name,size:"small"},model:{value:t.projectName,callback:function(e){t.projectName=e},expression:"projectName"}}),n("p",[n("small",[t._v(t._s(t.$lang.messages.createConfigurableProject))])])],1)],1)],1),n("el-tab-pane",{attrs:{label:t.$lang.columns.upload,name:"upload"}},[n("el-upload",{staticClass:"upload",attrs:{drag:"",accept:".zip",action:t.$store.state.url.project.upload}},[n("i",{staticClass:"el-icon-upload"}),n("div",{staticClass:"el-upload__text"},[t._v("\n\t\t\t\t\t\t"+t._s(t.$lang.messages.dragOrSelect)+"\n\t\t\t\t\t")]),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("\n\t\t\t\t\t\t"+t._s(t.$lang.messages.supportZip)+"\n\t\t\t\t\t")])])],1),n("el-tab-pane",{attrs:{label:t.$lang.columns.clone,name:"clone"}},[n("el-form",[n("el-form-item",{attrs:{label:t.$lang.columns.address,"label-width":"65px"}},[n("el-input",{staticClass:"inline",attrs:{placeholder:t.$lang.columns.address,size:"small"},model:{value:t.gitAddress,callback:function(e){t.gitAddress=e},expression:"gitAddress"}})],1)],1)],1)],1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:function(e){t.createProjectDialog=!1}}},[t._v(t._s(t.$lang.buttons.cancel)+"\n\t\t\t")]),"create"===t.activeDialogTab?n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.onCreateProject()}}},[t._v(t._s(t.$lang.buttons.create)+"\n\t\t\t")]):t._e(),"upload"===t.activeDialogTab?n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.onUploadedProject()}}},[t._v(t._s(t.$lang.buttons.finish)+"\n\t\t\t")]):t._e(),"clone"===t.activeDialogTab?n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.onCloneProject()}}},[t._v(t._s(t.$lang.buttons.clone)+"\n\t\t\t")]):t._e()],1)],1),n("panel-title",{attrs:{title:t.$lang.objects.project}},[n("el-button",{attrs:{size:"mini"},on:{click:function(e){return e.stopPropagation(),t.onRefresh(e)}}},[n("i",{staticClass:"fa fa-refresh"}),t._v("\n\t\t\t"+t._s(t.$lang.buttons.refresh)+"\n\t\t")]),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.createProjectDialog=!0}}},[n("i",{staticClass:"fa fa-plus"}),t._v("\n\t\t\t"+t._s(t.$lang.buttons.create)+"\n\t\t")])],1),n("div",{staticClass:"panel-body"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],style:{width:"100%;"},attrs:{data:t.projects,"empty-text":t.$lang.messages.noData,"element-loading-text":t.$lang.messages.loading}},[n("el-table-column",{attrs:{type:"index"}}),n("el-table-column",{attrs:{align:"center",prop:"username",label:t.$lang.columns.owner,width:"100"}}),n("el-table-column",{attrs:{align:"center",prop:"name",label:t.$lang.columns.name,width:"100"}}),n("el-table-column",{attrs:{label:t.$lang.columns.open},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-switch",{on:{change:function(n){return t.handlerProjectOpen(e.row.id,e.row.open)}},model:{value:e.row.open,callback:function(n){t.$set(e.row,"open",n)},expression:"scope.row.open"}})]}}])}),n("el-table-column",{attrs:{align:"center",label:t.$lang.columns.configurable,width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return t.buildInfos[e.row.name]?[t.buildInfos[e.row.name]["configurable"]?n("span",[n("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"mini",round:""}})],1):n("span",[n("el-button",{attrs:{type:"primary",icon:"el-icon-close",size:"mini",round:""}})],1)]:void 0}}],null,!0)}),n("el-table-column",{attrs:{align:"center",label:t.$lang.columns.built,width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){return t.buildInfos[e.row.name]?[t.buildInfos[e.row.name]["egg"]?n("span",[n("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"mini",round:""}})],1):n("span",[n("el-button",{attrs:{type:"primary",icon:"el-icon-close",size:"mini",round:""}})],1)]:void 0}}],null,!0)}),n("el-table-column",{attrs:{align:"center",label:t.$lang.columns.builtAt,width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.buildInfos[e.row.name]?n("span",[t._v("\n\t\t\t\t\t\t"+t._s(t.buildInfos[e.row.name]["built_at"])+"\n\t\t\t\t\t")]):t._e()]}}])}),n("el-table-column",{attrs:{align:"center",label:t.$lang.columns.description,width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.buildInfos[e.row.name]?n("span",[t._v("\n\t\t\t\t\t\t"+t._s(t.buildInfos[e.row.name]["description"])+"\n\t\t\t\t\t")]):t._e()]}}])}),n("el-table-column",{attrs:{align:"center",label:t.$lang.columns.operations},scopedSlots:t._u([{key:"default",fn:function(e){return[t.buildInfos[e.row.name]&&t.buildInfos[e.row.name]["configurable"]?n("router-link",{attrs:{to:{name:"projectConfigure",params:{name:e.row.name}},tag:"span"}},[n("el-button",{attrs:{type:"warning",size:"mini"}},[n("i",{staticClass:"fa fa-edit"}),t._v("\n\t\t\t\t\t\t\t"+t._s(t.$lang.buttons.configure)+"\n\t\t\t\t\t\t")])],1):n("router-link",{attrs:{to:{name:"projectEdit",params:{name:e.row.name}},tag:"span"}},[n("el-button",{attrs:{type:"warning",size:"mini"}},[n("i",{staticClass:"fa fa-edit"}),t._v("\n\t\t\t\t\t\t\t"+t._s(t.$lang.buttons.edit)+"\n\t\t\t\t\t\t")])],1),n("router-link",{attrs:{to:{name:"projectDeploy",params:{name:e.row.name}},tag:"span"}},[n("el-button",{attrs:{type:"success",size:"mini"}},[n("i",{staticClass:"fa fa-cloud-upload"}),t._v("\n\t\t\t\t\t\t\t"+t._s(t.$lang.buttons.deploy)+"\n\t\t\t\t\t\t")])],1),n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(n){return t.onSingleDelete(e.row.name)}}},[n("i",{staticClass:"fa fa-remove"}),t._v("\n\t\t\t\t\t\t"+t._s(t.$lang.buttons.delete)+"\n\t\t\t\t\t")])]}}])})],1)],1)],1)},s=[],o=(n("7f7f"),n("ac6a"),n("eee4")),l={name:"ProjectIndex",data:function(){return{activeDialogTab:"create",createProjectDialog:!1,projectName:null,gitAddress:null,projects:[],loading:!1,buildInfos:{}}},components:{PanelTitle:o["a"]},created:function(){this.getProjectData()},methods:{handlerProjectOpen:function(t,e){var n=this,a=!e;this.$http.patch(this.formatString(this.$store.state.url.project.update,{id:t}),{open:a}).then(function(){n.$message.success("success")}).catch(this.$message.error("error"))},getBuildInfo:function(t){var e=this;this.$http.get(this.formatString(this.$store.state.url.project.build,{name:t})).then(function(n){var a=n.data;e.$set(e.buildInfos,t,a)})},getProjectData:function(){var t=this;this.loading=!0,this.$http.get(this.$store.state.url.project.index).then(function(e){var n=e.data;t.projects=n,t.loading=!1,t.projects.forEach(function(e){t.getBuildInfo(e.name)})}).catch(function(){t.loading=!1})},onRefresh:function(){this.getProjectData()},onDeleteProject:function(t){var e=this;this.loading=!0,this.$http.post(this.formatString(this.$store.state.url.project.remove,{name:t})).then(function(){e.$message.success(e.$lang.messages.successDelete),e.loading=!1,e.getProjectData()}).catch(function(){e.loading=!1,e.$message.error(e.$lang.messages.errorDelete)})},onSingleDelete:function(t){var e=this;this.$confirm(this.$lang.messages.confirm,this.$lang.buttons.confirm,{confirmButtonText:this.$lang.buttons.yes,cancelButtonText:this.$lang.buttons.no,type:"warning"}).then(function(){e.onDeleteProject(t)})},onCloneProject:function(){var t=this;this.$message.success(this.$lang.messages.cloning),this.$http.post(this.$store.state.url.project.clone,{address:this.gitAddress}).then(function(){t.$message.success(t.$lang.messages.successClone),t.loading=!1,t.createProjectDialog=!1,t.onRefresh()}).catch(function(){t.loading=!1,t.$message.error(t.$lang.messages.errorClone)})},onCreateProject:function(){var t=this;this.$http.post(this.$store.state.url.project.create,{name:this.projectName}).then(function(){t.$message.success(t.$lang.messages.successSave),t.loading=!1,t.$router.push({name:"projectConfigure",params:{name:t.projectName}})}).catch(function(){t.loading=!1,t.$message.error(t.$lang.messages.errorSave)})},onUploadedProject:function(){this.createProjectDialog=!1,this.onRefresh()}}},i=l,r=(n("44cd"),n("2877")),c=Object(r["a"])(i,a,s,!1,null,null,null);e["default"]=c.exports},dda6:function(t,e,n){},eee4:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"panel-title"},[t.title?n("span",{domProps:{textContent:t._s(t.title)}}):t._e(),n("div",{staticClass:"fr"},[t._t("default")],2)])},s=[],o={name:"PanelTitle",props:{title:{type:String}}},l=o,i=n("2877"),r=Object(i["a"])(l,a,s,!1,null,null,null);e["a"]=r.exports}}]);
//# sourceMappingURL=chunk-736ea204.25d5532f.js.map