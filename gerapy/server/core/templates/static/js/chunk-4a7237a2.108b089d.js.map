{"version":3,"sources":["webpack:///./src/views/client/Schedule.vue?66ae","webpack:///./src/views/client/Schedule.vue?c224","webpack:///src/views/client/Schedule.vue","webpack:///./src/views/client/Schedule.vue?fe37","webpack:///./src/views/client/Schedule.vue","webpack:///./src/components/PanelTitle.vue?4d89","webpack:///src/components/PanelTitle.vue","webpack:///./src/components/PanelTitle.vue?1762","webpack:///./src/components/PanelTitle.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","_l","project","key","staticClass","attrs","directives","name","rawName","value","expression","spidersLoading","style","width","spiders","$lang","columns","id","operations","scopedSlots","_u","fn","props","on","$event","onStartSpider","row","_v","_s","buttons","run","getLog","jobs","job","slot","minWidth","spider","_e","jobID","startTime","start_time","substring","endTime","end_time","jobStatusClass","status","includes","jobStatusText","stopPropagation","onCancelJob","cancel","stop","logLoadingText","logs","staticRenderFns","component","domProps","title","_t"],"mappings":"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","file":"static/js/chunk-4a7237a2.108b089d.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Schedule.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Schedule.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',_vm._l((_vm.projects),function(project){return _c('div',{key:project,staticClass:\"panel\"},[_c('panel-title',{attrs:{\"title\":project}}),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.projectsLoading),expression:\"projectsLoading\"}],staticClass:\"panel-body\"},[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.spidersLoading[project]),expression:\"spidersLoading[project]\"}],style:({width: '100%'}),attrs:{\"data\":_vm.spiders[project]}},[_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":_vm.$lang.columns.id,\"width\":\"200\"}}),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":_vm.$lang.columns.name,\"width\":\"400\"}}),_c('el-table-column',{attrs:{\"label\":_vm.$lang.columns.operations},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_c('el-button',{attrs:{\"type\":\"success\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.onStartSpider(project, props.row.name)}}},[_c('i',{staticClass:\"fa fa-caret-right\"}),_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.$lang.buttons.run)+\"\\n\\t\\t\\t\\t\\t\\t\")])]}}],null,true)})],1),_c('el-collapse',{attrs:{\"accordion\":\"\"},on:{\"change\":_vm.getLog}},_vm._l((_vm.jobs[project]),function(job){return _c('el-collapse-item',{key:job.id,attrs:{\"name\":job.id}},[_c('template',{slot:\"title\"},[(job.spider)?_c('span',{staticClass:\"m-l-xs\",style:({minWidth: '120px'})},[_c('i',{staticClass:\"fa fa-bug\"}),_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.$lang.columns.spider)+\":\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(job.spider)+\"\\n\\t\\t\\t\\t\\t\\t\")]):_vm._e(),(job.spider)?_c('span',{staticClass:\"m-l-md\",style:({minWidth: '290px'})},[_c('i',{staticClass:\"fa fa-key\"}),_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.$lang.columns.jobID)+\":\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(job.id)+\"\\n\\t\\t\\t\\t\\t\\t\")]):_vm._e(),(job.start_time)?_c('span',{staticClass:\"m-l-md\",style:({minWidth: '190px'})},[_c('i',{staticClass:\"el-icon-time\"}),_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.$lang.columns.startTime)+\":\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(job.start_time.substring(0, 16))+\"\\n\\t\\t\\t\\t\\t\\t\")]):_vm._e(),(job.end_time)?_c('span',{staticClass:\"m-l-md\",style:({minWidth: '190px'})},[_c('i',{staticClass:\"el-icon-time\"}),_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.$lang.columns.endTime)+\":\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(job.end_time.substring(0, 16))+\"\\n\\t\\t\\t\\t\\t\\t\")]):_vm._e(),_c('span',{staticClass:\"m-l-md\"},[_c('el-button',{staticClass:\"pull-right m-r-md\",attrs:{\"type\":_vm.jobStatusClass[job.status],\"size\":\"mini\"}},[(['pending'].includes(job.status))?_c('i',{staticClass:\"fa fa-circle-thin\"}):_vm._e(),(['running'].includes(job.status))?_c('i',{staticClass:\"fa fa-spin fa-spinner\"}):_vm._e(),(['finished'].includes(job.status))?_c('i',{staticClass:\"fa fa-check\"}):_vm._e(),_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.jobStatusText[job.status])+\"\\n\\t\\t\\t\\t\\t\\t\\t\")]),(['pending', 'running'].includes(job.status))?_c('el-button',{staticClass:\"pull-right m-r-md\",attrs:{\"type\":\"danger\",\"size\":\"mini\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.onCancelJob(job.id)}}},[_c('i',{staticClass:\"fa fa-remove\"}),(['pending'].includes(job.status))?_c('span',[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.$lang.buttons.cancel)+\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\")]):_vm._e(),(['running'].includes(job.status))?_c('span',[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.$lang.buttons.stop)+\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\")]):_vm._e()]):_vm._e()],1)]),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.logLoading),expression:\"logLoading\"}],attrs:{\"element-loading-text\":_vm.logLoadingText}},[_c('pre',[_vm._v(_vm._s(_vm.logs[job.id]))])])],2)}),1)],1)],1)}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div>\n\t\t<div class=\"panel\" v-for=\"project in projects\" :key=\"project\">\n\t\t\t<panel-title :title=\"project\">\n\t\t\t</panel-title>\n\t\t\t<div class=\"panel-body\" v-loading=\"projectsLoading\">\n\t\t\t\t<el-table\n\t\t\t\t\t:data=\"spiders[project]\"\n\t\t\t\t\tv-loading=\"spidersLoading[project]\"\n\t\t\t\t\t:style=\"{width: '100%'}\">\n\t\t\t\t\t<el-table-column\n\t\t\t\t\t\tprop=\"id\"\n\t\t\t\t\t\t:label=\"$lang.columns.id\"\n\t\t\t\t\t\twidth=\"200\">\n\t\t\t\t\t</el-table-column>\n\t\t\t\t\t<el-table-column\n\t\t\t\t\t\tprop=\"name\"\n\t\t\t\t\t\t:label=\"$lang.columns.name\"\n\t\t\t\t\t\twidth=\"400\">\n\t\t\t\t\t</el-table-column>\n\t\t\t\t\t<el-table-column\n\t\t\t\t\t\t:label=\"$lang.columns.operations\">\n\t\t\t\t\t\t<template slot-scope=\"props\">\n\t\t\t\t\t\t\t<el-button type=\"success\" size=\"mini\" @click=\"onStartSpider(project, props.row.name)\">\n\t\t\t\t\t\t\t\t<i class=\"fa fa-caret-right\"></i>\n\t\t\t\t\t\t\t\t{{ $lang.buttons.run }}\n\t\t\t\t\t\t\t</el-button>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</el-table-column>\n\t\t\t\t</el-table>\n\t\t\t\t<el-collapse accordion @change=\"getLog\">\n\t\t\t\t\t<el-collapse-item v-for=\"job in jobs[project]\" :name=\"job.id\" :key=\"job.id\">\n\t\t\t\t\t\t<template slot=\"title\">\n\t\t\t\t\t\t\t<span v-if=\"job.spider\" class=\"m-l-xs\" :style=\"{minWidth: '120px'}\">\n\t\t\t\t\t\t\t\t<i class=\"fa fa-bug\"></i>\n\t\t\t\t\t\t\t\t{{ $lang.columns.spider }}:\n\t\t\t\t\t\t\t\t{{ job.spider }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span v-if=\"job.spider\" class=\"m-l-md\" :style=\"{minWidth: '290px'}\">\n\t\t\t\t\t\t\t\t<i class=\"fa fa-key\"></i>\n\t\t\t\t\t\t\t\t{{ $lang.columns.jobID }}:\n\t\t\t\t\t\t\t\t{{ job.id }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span v-if=\"job.start_time\" class=\"m-l-md\" :style=\"{minWidth: '190px'}\">\n\t\t\t\t\t\t\t\t<i class=\"el-icon-time\"></i>\n\t\t\t\t\t\t\t\t{{ $lang.columns.startTime }}:\n\t\t\t\t\t\t\t\t{{ job.start_time.substring(0, 16) }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span v-if=\"job.end_time\" class=\"m-l-md\" :style=\"{minWidth: '190px'}\">\n\t\t\t\t\t\t\t\t<i class=\"el-icon-time\"></i>\n\t\t\t\t\t\t\t\t{{ $lang.columns.endTime }}:\n\t\t\t\t\t\t\t\t{{ job.end_time.substring(0, 16) }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span class=\"m-l-md\">\n\t\t\t\t\t\t\t\t<el-button :type=\"jobStatusClass[job.status]\" size=\"mini\" class=\"pull-right m-r-md\">\n\t\t\t\t\t\t\t\t\t<i v-if=\"['pending'].includes(job.status)\" class=\"fa fa-circle-thin\"></i>\n\t\t\t\t\t\t\t\t\t<i v-if=\"['running'].includes(job.status)\" class=\"fa fa-spin fa-spinner\"></i>\n\t\t\t\t\t\t\t\t\t<i v-if=\"['finished'].includes(job.status)\" class=\"fa fa-check\"></i>\n\t\t\t\t\t\t\t\t\t{{ jobStatusText[job.status] }}\n\t\t\t\t\t\t\t\t</el-button>\n\t\t\t\t\t\t\t\t<el-button type=\"danger\" size=\"mini\" class=\"pull-right m-r-md\"\n\t\t\t\t\t\t\t\t\tv-if=\"['pending', 'running'].includes(job.status)\" @click.stop=\"onCancelJob(job.id)\">\n\t\t\t\t\t\t\t\t\t<i class=\"fa fa-remove\"></i>\n\t\t\t\t\t\t\t\t\t<span v-if=\"['pending'].includes(job.status)\">\n\t\t\t\t\t\t\t\t\t\t{{ $lang.buttons.cancel }}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span v-if=\"['running'].includes(job.status)\">\n\t\t\t\t\t\t\t\t\t\t{{ $lang.buttons.stop }}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</el-button>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<div v-loading=\"logLoading\" :element-loading-text=\"logLoadingText\">\n\t\t\t\t\t\t\t<pre>{{ logs[job.id] }}</pre>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</el-collapse-item>\n\t\t\t\t</el-collapse>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\n\timport PanelTitle from '../../components/PanelTitle'\n\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\t// 连续获取错误次数\n\t\t\t\terrorCount: 0,\n\t\t\t\t// 所有项目\n\t\t\t\tprojects: [],\n\t\t\t\t// 加载projects标志\n\t\t\t\tprojectsLoading: true,\n\t\t\t\t// 所有爬虫 {'project1': ['spider1', 'spider2'], 'project2': ['spider1']}\n\t\t\t\tspiders: {},\n\t\t\t\t// 加载spiders标志\n\t\t\t\tspidersLoading: {},\n\t\t\t\t// 所有任务 {'project1': [{'id': '', 'spider': '', 'status': ''}]}\n\t\t\t\tjobs: {},\n\t\t\t\t// 任务状态\n\t\t\t\tjobStatuses: ['finished', 'running', 'pending'],\n\t\t\t\t// 任务状态class\n\t\t\t\tjobStatusClass: {\n\t\t\t\t\tfinished: 'info',\n\t\t\t\t\trunning: 'success',\n\t\t\t\t\tpending: 'warning'\n\t\t\t\t},\n\t\t\t\t// 任务状态文本\n\t\t\t\tjobStatusText: {\n\t\t\t\t\tfinished: this.$store.getters.$lang.buttons.finished,\n\t\t\t\t\trunning: this.$store.getters.$lang.buttons.running,\n\t\t\t\t\tpending: this.$store.getters.$lang.buttons.pending\n\t\t\t\t},\n\t\t\t\t// 任务信息 {'jobid': {'spider': 'spider1', 'project': 'project1'}}\n\t\t\t\tjobsInfo: {},\n\t\t\t\t// 日志信息 {'logid': 'text'}\n\t\t\t\tlogs: {},\n\t\t\t\t// 加载logs标志\n\t\t\t\tlogLoading: true,\n\t\t\t\t// 加载log提示语\n\t\t\t\tlogLoadingText: this.$store.getters.$lang.messages.loading,\n\t\t\t\t// 定时刷新log指针\n\t\t\t\tlogLoadingInterval: null,\n\t\t\t\t// 标记正在加载哪个log\n\t\t\t\tlogLoadingActive: null,\n\t\t\t\t// 路由信息\n\t\t\t\trouteId: this.$route.params.id\n\t\t\t}\n\t\t},\n\t\tcomponents: {\n\t\t\tPanelTitle,\n\t\t},\n\t\tcreated() {\n\t\t\tthis.getProjects()\n\t\t\tthis.$store.commit(\n\t\t\t\t'addInterval',\n\t\t\t\tsetInterval(() => {\n\t\t\t\t\tthis.getJobs()\n\t\t\t\t}, 5000)\n\t\t\t)\n\t\t},\n\t\tmethods: {\n\t\t\t//获取所有项目\n\t\t\tgetProjects() {\n\t\t\t\tthis.$http.get(this.formatString(this.$store.state.url.client.projects, {\n\t\t\t\t\tid: this.routeId\n\t\t\t\t})).then(({data: data}) => {\n\t\t\t\t\tthis.projects = data\n\t\t\t\t\tthis.projectsLoading = false\n\t\t\t\t\tthis.projects.forEach(project => {\n\t\t\t\t\t\tthis.$set(this.spidersLoading, project, true)\n\t\t\t\t\t})\n\t\t\t\t\tthis.errorCount = 0\n\t\t\t\t\t// 获取所有爬虫\n\t\t\t\t\tthis.getSpiders()\n\t\t\t\t\t// 获取所有任务\n\t\t\t\t\tthis.getJobs()\n\t\t\t\t}).catch(() => {\n\t\t\t\t\tthis.projectsLoading = false\n\t\t\t\t\tthis.errorCount += 1\n\t\t\t\t\tif (this.errorCount >= 3) {\n\t\t\t\t\t\tthis.$message.error(this.$store.getters.$lang.messages.errorLoad)\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// 定时任务\n\t\t\t\t\t\tthis.$store.commit(\n\t\t\t\t\t\t\t'setTimeout',\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tthis.getProjects()\n\t\t\t\t\t\t\t}, 3000)\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t// 获取所有爬虫\n\t\t\tgetSpiders() {\n\t\t\t\tthis.projects.forEach(project => {\n\t\t\t\t\tthis.$http.get(this.formatString(this.$store.state.url.client.listSpiders, {\n\t\t\t\t\t\tid: this.routeId,\n\t\t\t\t\t\tproject: project\n\t\t\t\t\t})).then(({data: data}) => {\n\t\t\t\t\t\tthis.$set(this.spiders, project, data)\n\t\t\t\t\t\tthis.$set(this.spidersLoading, project, false)\n\t\t\t\t\t}).catch(() => {\n\t\t\t\t\t\tthis.$set(this.spidersLoading, project, false)\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t},\n\t\t\t// 获取所有任务\n\t\t\tgetJobs() {\n\t\t\t\tthis.projects.forEach(project => {\n\t\t\t\t\tthis.$http.get(this.formatString(this.$store.state.url.client.listJobs, {\n\t\t\t\t\t\tid: this.routeId,\n\t\t\t\t\t\tproject: project\n\t\t\t\t\t})).then(({data: data}) => {\n\t\t\t\t\t\tthis.$set(this.jobs, project, data)\n\t\t\t\t\t\tfor (let project in this.jobs) {\n\t\t\t\t\t\t\tlet jobs = this.jobs[project]\n\t\t\t\t\t\t\tjobs.forEach(job => {\n\t\t\t\t\t\t\t\tthis.$set(this.jobsInfo, job.id, {\n\t\t\t\t\t\t\t\t\tproject: project,\n\t\t\t\t\t\t\t\t\tspider: job['spider']\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t},\n\t\t\t// 启动任务\n\t\t\tonStartSpider(project, spider) {\n\t\t\t\tthis.$http.get(this.formatString(this.$store.state.url.client.startSpider, {\n\t\t\t\t\tid: this.routeId,\n\t\t\t\t\tproject: project,\n\t\t\t\t\tspider: spider\n\t\t\t\t})).then(() => {\n\t\t\t\t\tthis.$message.success(\n\t\t\t\t\t\tthis.$store.getters.$lang.messages.successRun\n\t\t\t\t\t)\n\t\t\t\t\tthis.getJobs()\n\t\t\t\t}).catch(() => {\n\t\t\t\t\tthis.$message.error(\n\t\t\t\t\t\tthis.$store.getters.$lang.messages.errorRun\n\t\t\t\t\t)\n\t\t\t\t})\n\t\t\t},\n\t\t\t// 获取日志\n\t\t\tgetLog(job) {\n\t\t\t\t// 如果展开日志\n\t\t\t\tif (job) {\n\t\t\t\t\t//设置活跃日志\n\t\t\t\t\tthis.logLoadingActive = job\n\t\t\t\t\t// 正在加载\n\t\t\t\t\tthis.logLoading = true\n\t\t\t\t\t// 请求日志\n\t\t\t\t\tthis.$http.get(this.formatString(this.$store.state.url.client.getLog, {\n\t\t\t\t\t\tid: this.routeId,\n\t\t\t\t\t\tproject: this.jobsInfo[this.logLoadingActive]['project'],\n\t\t\t\t\t\tspider: this.jobsInfo[this.logLoadingActive]['spider'],\n\t\t\t\t\t\tjob: this.logLoadingActive,\n\t\t\t\t\t\trandom: Math.random()\n\t\t\t\t\t})).then(({data: data}) => {\n\t\t\t\t\t\t//设置日志字典\n\t\t\t\t\t\tthis.$set(this.logs, this.logLoadingActive, data)\n\t\t\t\t\t\t// 加载日志完成\n\t\t\t\t\t\tthis.logLoading = false\n\t\t\t\t\t\t// 定时任务获取最新爬取日志\n\t\t\t\t\t\tthis.$store.commit(\n\t\t\t\t\t\t\t'setTimeout',\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tthis.getLog(job)\n\t\t\t\t\t\t\t}, 2000)\n\t\t\t\t\t\t)\n\t\t\t\t\t}).catch(() => {\n\t\t\t\t\t\tthis.logLoading = false\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\t//闭合之后停止加载日志\n\t\t\t\t\tthis.$store.commit('clearTimeout')\n\t\t\t\t}\n\t\t\t},\n\t\t\tonCancelJob(job) {\n\t\t\t\tthis.$http.get(this.formatString(this.$store.state.url.client.cancelJob, {\n\t\t\t\t\tid: this.routeId,\n\t\t\t\t\tproject: this.jobsInfo[job]['project'],\n\t\t\t\t\tjob: job\n\t\t\t\t})).then(() => {\n\t\t\t\t\tthis.$message.success(\n\t\t\t\t\t\tthis.$store.getters.$lang.messages.canceling\n\t\t\t\t\t)\n\t\t\t\t\tthis.getJobs()\n\t\t\t\t}).catch(() => {\n\t\t\t\t\tthis.$message.error(\n\t\t\t\t\t\tthis.$store.getters.$lang.messages.errorCancel\n\t\t\t\t\t)\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style>\n\t.el-collapse-item__content {\n\t\tpadding: 15px 15px;\n\t}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Schedule.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Schedule.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Schedule.vue?vue&type=template&id=763b80ce&\"\nimport script from \"./Schedule.vue?vue&type=script&lang=js&\"\nexport * from \"./Schedule.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Schedule.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"panel-title\"},[(_vm.title)?_c('span',{domProps:{\"textContent\":_vm._s(_vm.title)}}):_vm._e(),_c('div',{staticClass:\"fr\"},[_vm._t(\"default\")],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"panel-title\">\n\t\t<span v-if=\"title\" v-text=\"title\"></span>\n\t\t<div class=\"fr\">\n\t\t\t<slot></slot>\n\t\t</div>\n\t</div>\n</template>\n<script>\n\texport default {\n\t\tname: 'PanelTitle',\n\t\tprops: {\n\t\t\ttitle: {\n\t\t\t\ttype: String\n\t\t\t}\n\t\t}\n\t}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PanelTitle.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PanelTitle.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PanelTitle.vue?vue&type=template&id=da21cd5e&\"\nimport script from \"./PanelTitle.vue?vue&type=script&lang=js&\"\nexport * from \"./PanelTitle.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}